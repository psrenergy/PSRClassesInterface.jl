<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Modifying a Study · PSRClassesInterface.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">PSRClassesInterface.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../manual/">Manual</a></li><li><span class="tocitem">OpenStudy Files and Structs</span><ul><li><a class="tocitem" href="../../openstudy_files/file_diagram/">OpenStudy Files and Structs 101</a></li><li><a class="tocitem" href="../../openstudy_files/pmd/">PMD</a></li><li><a class="tocitem" href="../../openstudy_files/model_template/">Model Template</a></li><li><a class="tocitem" href="../../openstudy_files/relation_mapper/">Relation Mapper</a></li><li><a class="tocitem" href="../../openstudy_files/psrclasses/">psrclasses.json and Defaults</a></li></ul></li><li><span class="tocitem">PSRDatabaseSQLite Overview</span><ul><li><a class="tocitem" href="../../psrdatabasesqlite/introduction/">SQLite 101</a></li><li><a class="tocitem" href="../../psrdatabasesqlite/rules/">PSRDatabaseSQLite</a></li><li><a class="tocitem" href="../../psrdatabasesqlite/time_series/">Time Series</a></li></ul></li><li><span class="tocitem">OpenStudy and OpenBinary Examples</span><ul><li><a class="tocitem" href="../reading_parameters/">Reading parameters</a></li><li><a class="tocitem" href="../reading_relations/">Reading Relations</a></li><li><a class="tocitem" href="../graf_files/">Graf Files and Time Series</a></li><li><a class="tocitem" href="../reading_demands/">Reading Demands</a></li><li class="is-active"><a class="tocitem" href>Modifying a Study</a><ul class="internal"><li><a class="tocitem" href="#Creating-a-Study"><span>Creating a Study</span></a></li><li><a class="tocitem" href="#Adding-new-elements"><span>Adding new elements</span></a></li><li><a class="tocitem" href="#Setting-relations"><span>Setting relations</span></a></li><li><a class="tocitem" href="#Deleting-elements"><span>Deleting elements</span></a></li></ul></li><li><a class="tocitem" href="../custom_study/">Customizing a Study</a></li></ul></li><li><span class="tocitem">PSRDatabaseSQLite Examples</span><ul><li><a class="tocitem" href="../../sqlite_examples/migrations/">Migration Examples</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">OpenStudy and OpenBinary Examples</a></li><li class="is-active"><a href>Modifying a Study</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Modifying a Study</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/psrenergy/PSRClassesInterface.jl/blob/master/docs/src/examples/modification.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Modifying-a-Study"><a class="docs-heading-anchor" href="#Modifying-a-Study">Modifying a Study</a><a id="Modifying-a-Study-1"></a><a class="docs-heading-anchor-permalink" href="#Modifying-a-Study" title="Permalink"></a></h1><p>In this example we will be showing how to modify your study in runtime, adding/deleting elements, setting relations, ...</p><h2 id="Creating-a-Study"><a class="docs-heading-anchor" href="#Creating-a-Study">Creating a Study</a><a id="Creating-a-Study-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-a-Study" title="Permalink"></a></h2><p>You can modify an existing study or a new one with the following functions:</p><ul><li><a href="../../manual/#PSRClassesInterface.create_study"><code>PSRClassesInterface.create_study</code></a> &amp;rarr; to create a new study;</li><li><a href="../../manual/#PSRClassesInterface.load_study"><code>PSRClassesInterface.load_study</code></a> &amp;rarr; to load an old study.</li></ul><p>In this example, we will be working with a new empty study.</p><pre><code class="language- hljs">using PSRClassesInterface
const PSRI = PSRClassesInterface

temp_path = joinpath(tempdir(), &quot;PSRI&quot;)

data = PSRI.create_study(PSRI.OpenInterface(); data_path = temp_path)</code></pre><h2 id="Adding-new-elements"><a class="docs-heading-anchor" href="#Adding-new-elements">Adding new elements</a><a id="Adding-new-elements-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-new-elements" title="Permalink"></a></h2><p>You can only add elements from collections that are available for your study. Here we will be using our default study configuration, but in another example you can learn how to work with a custom study. You can check which collections are available with <code>PSRI.get_collections(data)</code>.</p><p>Every study already comes with a <code>PSRStudy</code> element. So now we can add some elements with the function <a href="../../manual/#PSRClassesInterface.create_element!"><code>PSRClassesInterface.create_element!</code></a>, that returns the element&#39;s index in the collection.</p><pre><code class="nohighlight hljs">bus_1_index   = PSRI.create_element!(data, &quot;PSRBus&quot;)
serie_1_index = PSRI.create_element!(data, &quot;PSRSerie&quot;)</code></pre><p>When not specified, the attributes for the element are filled with their default values. But you can also set them manually. If you need, it is possible to see the attributes for a collection with <code>PSRI.get_attributes(data, COLLECTION)</code>.</p><pre><code class="language- hljs">bus_2_index = PSRI.create_element!(
    data, &quot;PSRBus&quot;, 
    &quot;name&quot; =&gt; &quot;bus_name&quot;, 
    &quot;Kv&quot; =&gt; 1.5, 
    &quot;code&quot;=&gt; Int32(98), 
    &quot;icca&quot; =&gt; Int32(5), 
    &quot;AVId&quot; =&gt; &quot;bus_id&quot;
    )

# You don&#39;t need to set all attributes

bus_3_index = PSRI.create_element!(
    data, &quot;PSRBus&quot;, 
    &quot;code&quot;=&gt; Int32(10), 
    )</code></pre><h2 id="Setting-relations"><a class="docs-heading-anchor" href="#Setting-relations">Setting relations</a><a id="Setting-relations-1"></a><a class="docs-heading-anchor-permalink" href="#Setting-relations" title="Permalink"></a></h2><p>Some collections in a Study can have relations between some of their elements. </p><p>A Relation has a <code>source</code> and a <code>target</code> element. We can check the available relations for an element when it is a <code>source</code> with <code>PSRI.get_relations(COLLECTION)</code>. Just as for custom collections, you can learn how to customize relations in another tutorial.</p><pre><code class="language- hljs">PSRI.set_related!(
    data, 
    &quot;PSRSerie&quot;, 
    &quot;PSRBus&quot;, 
    serie_1_index, 
    bus_1_index , 
    relation_type = PSRI.PMD.RELATION_FROM
    )

PSRI.set_related!(
    data, 
    &quot;PSRSerie&quot;, 
    &quot;PSRBus&quot;, 
    serie_1_index, 
    bus_2_index , 
    relation_type = PSRI.PMD.RELATION_TO
    )</code></pre><h2 id="Deleting-elements"><a class="docs-heading-anchor" href="#Deleting-elements">Deleting elements</a><a id="Deleting-elements-1"></a><a class="docs-heading-anchor-permalink" href="#Deleting-elements" title="Permalink"></a></h2><p>We can delete an element using <a href="examples/@ref"><code>PSRClassesInterface.delete_element!</code></a>. </p><pre><code class="language- hljs">PSRI.delete_element!(data, &quot;PSRBus&quot;, bus_3_index)</code></pre><p>However, if you try to delete an element that has a relation with any other, you will receive an error message. </p><pre><code class="language- hljs">PSRI.delete_element!(data, &quot;PSRSerie&quot;, serie_1_index)</code></pre><blockquote><p>&lt;span style=&quot;color:red&quot;&gt;ERROR:&lt;/span&gt; Element PSRSerie cannot be deleted because it has relations with other elements</p></blockquote><p>So first, you have to check the relations that the element has and delete them.</p><p>To see the relations set to an element, use <a href="examples/@ref"><code>PSRClassesInterface.relations_summary</code></a>, which returns a list with the <code>target</code> element, with its index, pointing to the <code>source</code> element, also with its index.</p><pre><code class="language- hljs">PSRI.relations_summary(data, &quot;PSRBus&quot;, bus_1_index)</code></pre><pre><code class="language- hljs">PSRI.relations_summary(data, &quot;PSRBus&quot;, bus_2_index)</code></pre><pre><code class="language- hljs">PSRI.relations_summary(data, &quot;PSRSerie&quot;, serie_1_index)</code></pre><p>Now we know that we have to delete two relations to be able to delete the <code>PSRSerie</code> element. For that, we use <a href="examples/@ref"><code>PSRClassesInterface.delete_relation!</code></a>.</p><pre><code class="language- hljs">PSRI.delete_relation!(data, &quot;PSRSerie&quot;, &quot;PSRBus&quot;, serie_1_index, bus_1_index)
PSRI.delete_relation!(data, &quot;PSRSerie&quot;, &quot;PSRBus&quot;, serie_1_index, bus_2_index)</code></pre><p>After that, we can easily delete our <code>PSRSerie</code> element.</p><pre><code class="language- hljs">PSRI.delete_element!(data, &quot;PSRSerie&quot;, serie_1_index)</code></pre><p>After that we can save our study to a JSON file, which can later be used to load the study again.</p><pre><code class="language- hljs">PSRI.write_data(data)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../reading_demands/">« Reading Demands</a><a class="docs-footer-nextpage" href="../custom_study/">Customizing a Study »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Wednesday 20 August 2025 22:29">Wednesday 20 August 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
